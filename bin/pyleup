#!/usr/bin/env python

import os, sys
import click

from pyleup.coverage import process_bam


@click.group()
def cli():
    pass


@cli.command()
@click.argument('bam')
@click.option('--output', '-o', help='string to output directory', default='.')
@click.option('--verbose/--no-verbose', default=False)
def visualize(bam, output, verbose):
    """ Generate bam pileup visualization

    Arguments:
    bam -- String path to bam file
    """
    coverage_fp = os.path.join(output, bam.split('/')[-1].replace('.bam', '_coverage.csv'))
    process_bam(bam, coverage_fp) 

    
if __name__ == "__main__":
    cli()
